<!DOCTYPE html>
<html>
<head>
	<title>AngularjS $watch</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
</head>
<body ng-app="spike">


	<h1>AngularJS $watch function</h1>

	<p>
		Inspired by this <a href="http://www.toptal.com/angular-js/videos/javascript-video-tutorial-using-watch-watchgroup-and-watchcollection-functions-in-angularjs/#remote-developer-job">video tutorial</a>.
	</p>

    <div ng-controller="mainController">
		Message 1: {{message1}}
        Message 2: {{message2}}
		<div>
		</div>
	</div>
	
	
	<script>
	"use sctrict;"
	var app = angular.module("spike", []);
	
	app.controller("mainController",
		function($scope, $timeout) {
		    $scope.message1 = "first message";
		    $scope.message2 = "second message";

			$scope.$watchGroup(["message1", "message2"], function(newValues, oldValues) {
			    console.log("old values: " + oldValues);
			    console.log("new values: " + newValues);
			    // newValues and oldValues are of type "objectMessage" and are "array" of the values,
			    // you can use newValues[0]
			});

			$timeout(function() {
			    $scope.message1 = "new message 1";
			}, 2 * 1000);

			$timeout(function () {
			    $scope.message2 = "new message 2";
			}, 4 * 1000);
		}
	);
	
	</script>
</body>
</html>